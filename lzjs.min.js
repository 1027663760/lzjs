/*
 * lzjs - Compression by LZ algorithm in JavaScript.
 * @version 1.0.2
 * @copyright Copyright (c) 2014 polygon planet <polygon.planet.aqua@gmail.com>
 * @license Licensed under the MIT license.
 */
(function(p,m,n){"undefined"!==typeof module&&module.exports?module.exports=n():"function"===typeof define&&define.amd?define(n):m[p]=n()})("lzjs",this,function(){"use strict";function p(){this._length=this._index=this._offset=this._data=null}var m=String.fromCharCode,n=Object.prototype.hasOwnProperty,q=function(){for(var b="",a=32;127>a;a++)b+=m(a);return b}(),l=q.length,s=Math.max(l,62)-Math.min(l,62),r=l-1,u=l+1,v=s+20,w=l+5,t=l-s-19;p.prototype={_createWindow:function(){var b;b=" ";var a=1024;if("function"===
typeof b.repeat)b=b.repeat(a);else{for(var c="";;)if(a&1&&(c+=b),a>>=1)b+=b;else break;b=c}return b},_search:function(){for(var b=3,a=this._offset,c=this._data.substr(a,r),f=c.length,e=a-128,d,g;b<=f;){d=c.substr(0,b);g=this._data.substring(e,a+b-1);d=g.lastIndexOf(d);if(~d)this._index=128-d,this._length=b;else break;b++}return 3<b},_compressLzss:function(b){var a=[],c=q.split(""),f=this._createWindow();this._offset=f.length;this._data=f+b;var e,d,g;for(b=this._data.length;this._offset<b;)this._search()?
(f=this._index%r,d=(this._index-f)/r,a[a.length]=c[d+49],a[a.length]=c[f],a[a.length]=c[this._length],this._offset+=this._length,g=-2):(e=this._data.charCodeAt(this._offset++),132>e?(f=e%40,d=(e-f)/40,d+=u,g===d?a[a.length]=c[f]:(a[a.length]=c[d-v],a[a.length]=c[f],g=d)):(f=e%1640,d=(e-f)/1640,e=f%40,f=(f-e)/40,d+=w,g===d?(a[a.length]=c[e],a[a.length]=c[f]):(a[a.length]=c[48],a[a.length]=c[d-l],a[a.length]=c[e],a[a.length]=c[f],g=d)));return a},_decompressLzss:function(b){var a=this._createWindow(),
c,f,e,d,g,h=!1;d=null;var k={};c=0;for(f=q.length;c<f;c++)k[q.charAt(c)]=c;c=0;for(f=b.length;c<f;c++){e=k[b.charAt(c)];if(e>=l)throw Error("Out of range in decompression");if(e<t)h?(g=k[b.charAt(++c)],e=40*g+e+1640*d):e=40*d+e,a+=m(e);else if(47>e)d=e-t,h=!1;else if(48===e)d=k[b.charAt(++c)],d-=5,h=!0;else{d=k[b.charAt(++c)];d=(e-49)*r+d;e=k[b.charAt(++c)];if(g=a.slice(-128).slice(-d).substring(0,e)){for(d="";d.length<e;)d+=g;d=d.substring(0,e);a+=d}d=null}}return a.substring(1024)},_compressW:function(b){var a=
"",c="",f={},e=256,d=0,g=b.length,h;for(0<g&&(c=b[d++]);d<g;)h=b[d++],n.call(f,c+h)?c+=h:(a=1===c.length?a+c:a+f[c],65535>=e&&(f[c+h]=m(e++)),c=h);return a=1===c.length?a+c:a+f[c]},_decompressW:function(b){var a="",c=[],f=256,e=0,d=b.length,g,h,k;0<d&&(g=b.charCodeAt(e++),h=m(g),a+=h,k=h);for(;e<d;)g=b.charCodeAt(e++),g=255>=g?m(g):n.call(c,g)?c[g]:k+h,a+=g,h=g.charAt(0),c[f++]=k+h,k=g;return a},compress:function(b){return null==b||0===b.length?"":this._compressW(this._compressLzss(b))},decompress:function(b){return null==
b||0===b.length?"":this._decompressLzss(this._decompressW(b))}};return{compress:function(b){return(new p).compress(b)},decompress:function(b){return(new p).decompress(b)}}});
