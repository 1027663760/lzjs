/*
 * lzjs - Compression by LZ algorithm in JavaScript.
 * @version 1.2.5
 * @copyright Copyright (c) 2014-2015 polygon planet <polygon.planet.aqua@gmail.com>
 * @license Licensed under the MIT license.
 */
!function(a,b,c){"undefined"!=typeof exports?"undefined"!=typeof module&&module.exports?module.exports=c():exports[a]=c():"function"==typeof define&&define.amd?define(c):b[a]=c()}("lzjs",this,function(){"use strict";function a(a){this._init(a)}function b(a){this._init(a)}function c(a){this._init(a)}function d(a){this._init(a)}function e(){var a,b,c,d,e="abcdefghijklmnopqrstuvwxyz",f="",g=e.length;for(a=0;g>a;a++)for(c=e.charAt(a),b=g-1;b>15&&f.length<y;b--)d=e.charAt(b),f+=" "+c+" "+d;for(;f.length<y;)f=" "+f;return f=f.slice(0,y)}function f(a,b){return a.length===b?a:a.subarray?a.subarray(0,b):(a.length=b,a)}function g(a,b){if(q&&r&&A>b)try{return n.apply(null,f(a,b))}catch(c){}for(var d="",e=0;b>e;e++)d+=n(a[e]);return d}function h(a,b){if(!p)return new Array(b);switch(a){case 8:return new Uint8Array(b);case 16:return new Uint16Array(b)}}function i(a){for(var b,c="",d=0,e=a.length;e>d;d++)b=a.charCodeAt(d),128>b?c+=n(b):2048>b?c+=n(192|b>>6&31)+n(128|63&b):65536>b&&(c+=n(224|b>>12&15)+n(128|b>>6&63)+n(128|63&b));return c}function j(a){for(var b,c,d,e,f="",g=0,h=a.length;h>g;)c=a.charCodeAt(g++),b=c>>4,b>=0&&7>=b?f+=n(c):b>=12&&13>=b?(d=a.charCodeAt(g++),f+=n((31&c)<<6|63&d)):14===b&&(d=a.charCodeAt(g++),e=a.charCodeAt(g++),f+=n((15&c)<<12|(63&d)<<6|63&e));return f}function k(a,b){for(var c,d=0,e=0,f=a.length;f>e;e++)c=a.charCodeAt(e),128>c?d++:d+=2048>c?2:3;return d}function l(a){var b,c,d,e,f,g;for(d=a.length,c=0,b="";d>c;){if(e=255&a.charCodeAt(c++),c===d){b+=S.charAt(e>>2)+S.charAt((3&e)<<4)+"==";break}if(f=a.charCodeAt(c++),c===d){b+=S.charAt(e>>2)+S.charAt((3&e)<<4|(240&f)>>4)+S.charAt((15&f)<<2)+"=";break}g=a.charCodeAt(c++),b+=S.charAt(e>>2)+S.charAt((3&e)<<4|(240&f)>>4)+S.charAt((15&f)<<2|(192&g)>>6)+S.charAt(63&g)}return b}function m(a){var b,c,d,e,f,g,h;for(g=a.length,f=0,h="";g>f;){do b=T[255&a.charCodeAt(f++)];while(g>f&&-1===b);if(-1===b)break;do c=T[255&a.charCodeAt(f++)];while(g>f&&-1===c);if(-1===c)break;h+=n(b<<2|(48&c)>>4);do{if(d=255&a.charCodeAt(f++),61===d)return h;d=T[d]}while(g>f&&-1===d);if(-1===d)break;h+=n((15&c)<<4|(60&d)>>2);do{if(e=255&a.charCodeAt(f++),61===e)return h;e=T[e]}while(g>f&&-1===e);if(-1===e)break;h+=n((3&d)<<6|e)}return h}var n=String.fromCharCode,o=Object.prototype.hasOwnProperty,p="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array,q=!1,r=!1;try{"a"===n.apply(null,[97])&&(q=!0)}catch(s){}if(p)try{"a"===n.apply(null,new Uint8Array([97]))&&(r=!0)}catch(s){}var t=!1;-1!=="abc\u307b\u3052".lastIndexOf("\u307b\u3052",1)&&(t=!0);var u=function(){for(var a="",b={8:1,10:1,11:1,12:1,13:1,92:1},c=0;127>c;c++)o.call(b,c)||(a+=n(c));return a}(),v=u.length,w=Math.max(v,62)-Math.min(v,62),x=v-1,y=1024,z=304,A=65533,B=A,C=B-v,D=A,E=D+2*y,F=11,G=F*(F+1),H=40,I=H*(H+1),J=v+1,K=w+20,L=v+5,M=v-w-19,N=H+7,O=N+1,P=O+1,Q=P+5,R=Q+5;a.prototype={_init:function(a){a=a||{},this._data=null,this._table=null,this._result=null,this._onDataCallback=a.onData,this._onEndCallback=a.onEnd,this._maxBytes=a.maxBytes},_createTable:function(){for(var a=h(8,v),b=0;v>b;b++)a[b]=u.charCodeAt(b);return a},_onData:function(a,b){var c=g(a,b);this._onDataCallback?this._onDataCallback(c):this._result+=c},_onEnd:function(){this._onEndCallback&&this._onEndCallback(),this._data=this._table=null},_search:function(){var a=2,b=this._data,c=this._offset,d=x;if(this._dataLen-c<d&&(d=this._dataLen-c),a>d)return!1;var e,f,g,h,i,j,k=c-z,l=b.substring(k,c+d),m=c+a-3-k;do{if(2===a){if(f=b.charAt(c)+b.charAt(c+1),g=l.indexOf(f),!~g||g>m)break}else 3===a?f+=b.charAt(c+2):f=b.substr(c,a);if(t?(j=b.substring(k,c+a-1),h=j.lastIndexOf(f)):h=l.lastIndexOf(f,m),!~h)break;i=h,e=k+h;do if(b.charCodeAt(c+a)!==b.charCodeAt(e+a))break;while(++a<d);if(g===h){a++;break}}while(++a<d);return 2===a?!1:(this._index=z-i,this._length=a-1,!0)},compress:function(a){if(null==a||0===a.length)return"";var b="",c=this._createTable(),d=e(),f=h(8,B),g=0,i=0;this._result="",this._offset=d.length,this._data=d+a,this._dataLen=this._data.length,d=a=null;for(var j,k,l,m,n,o=-1,p=-1;this._offset<this._dataLen;){if(this._search()?(this._index<x?(k=this._index,l=0):(k=this._index%x,l=(this._index-k)/x),2===this._length?(f[g++]=c[l+Q],f[g++]=c[k],i+=2):(f[g++]=c[l+P],f[g++]=c[k],f[g++]=c[this._length],i+=3),this._offset+=this._length,~p&&(p=-1)):(j=this._data.charCodeAt(this._offset++),G>j?(H>j?(k=j,l=0,o=J):(k=j%H,l=(j-k)/H,o=l+J),p===o?(f[g++]=c[k],i++):(f[g++]=c[o-K],f[g++]=c[k],i+=2,p=o)):(I>j?(k=j,l=0,o=L):(k=j%I,l=(j-k)/I,o=l+L),H>k?(m=k,n=0):(m=k%H,n=(k-m)/H),p===o?(f[g++]=c[m],f[g++]=c[n],i+=2):(f[g++]=c[O],f[g++]=c[o-v],f[g++]=c[m],f[g++]=c[n],i+=4,p=o))),i>this._maxBytes)return!1;g>=C&&(this._onData(f,g),g=0)}return g>0&&this._onData(f,g),this._onEnd(),b=this._result,this._result=null,null===b?"":b}},b.prototype={_init:function(a){a=a||{},this._result=null,this._onDataCallback=a.onData,this._onEndCallback=a.onEnd},_createTable:function(){for(var a={},b=0;v>b;b++)a[u.charAt(b)]=b;return a},_onData:function(a){var b;if(this._onDataCallback){if(a)b=this._result,this._result=null;else{var c=D-y;b=this._result.substr(y,c),this._result=this._result.slice(0,y)+this._result.substring(y+c)}b.length>0&&this._onDataCallback(b)}},_onEnd:function(){this._onEndCallback&&this._onEndCallback()},decompress:function(a){if(null==a||0===a.length)return"";this._result=e();for(var b,c,d,f,g,h,i,j,k="",l=this._createTable(),m=!1,o=null,p=a.length,q=0;p>q;q++)if(b=l[a.charAt(q)],void 0!==b){if(M>b)m?(d=l[a.charAt(++q)],f=d*H+b+I*o):f=o*H+b,this._result+=n(f);else if(N>b)o=b-M,m=!1;else if(b===O)c=l[a.charAt(++q)],o=c-5,m=!0;else if(R>b){if(c=l[a.charAt(++q)],Q>b?(g=(b-P)*x+c,h=l[a.charAt(++q)]):(g=(b-Q)*x+c,h=2),j=this._result.slice(-z).slice(-g).substring(0,h)){for(i="";i.length<h;)i+=j;this._result+=i.substring(0,h)}o=null}this._result.length>=E&&this._onData()}return this._result=this._result.substring(y),this._onData(!0),this._onEnd(),k=this._result,this._result=null,null===k?"":k}},c.prototype={_init:function(a){a=a||{},this._codeStart=a.codeStart||255,this._codeMax=a.codeMax||65535,this._maxBytes=a.maxBytes},compress:function(a){if(null==a||0===a.length)return"";var b,c,d,e,f="",g=0,h=0,i=a.length,j="",k=this._codeStart+1,l=this._codeMax,m=2,p=[],q=0;for(i>0&&(j=b=a.charAt(h++));i>h;)if(b=a.charAt(h++),c=j+b,e=c.length,d=1<<e,(32>e&&q&d||e>=32&&void 0!==p[e])&&o.call(p[e],c))j+=b;else{if(1===j.length?(f+=j,g++):(f+=p[j.length][j],g+=m),g>this._maxBytes)return!1;l>=k&&(c=j+b,e=c.length,d=1<<e,(32>e&&!(q&d)||e>=32&&void 0===p[e])&&(p[e]={},q|=d),p[e][c]=n(k++),2048===k&&(m=3)),j=b}return 1===j.length?(f+=j,g++):(f+=p[j.length][j],g+=m),g>this._maxBytes?!1:f},decompress:function(a){if(null==a||0===a.length)return"";var b,c,d,e,f="",g={},h=this._codeStart+1,i=this._codeStart,j=0,k=a.length;for(k>0&&(b=a.charCodeAt(j++),c=n(b),f+=c,d=c);k>j;)b=a.charCodeAt(j++),e=i>=b?n(b):o.call(g,b)?g[b]:d+c,f+=e,c=e.charAt(0),g[h++]=d+c,d=e;return f}},d.prototype={_init:function(a){a=a||{},this._encoding=a.encoding||"utf-8"},compress:function(b){if(null==b||0===b.length)return"";b=""+b;var d,e="",f=k(b),g=.9*f|0,h=b.length,j={maxBytes:f};return f===h?(d="W",j.codeStart=127,j.codeMax=2047,e=new c(j).compress(b),e===!1&&(d="S",e=new a(j).compress(b),e===!1&&(d="N",e=b))):f>h&&h>g?(d="U",e=new c(j).compress(i(b)),e===!1&&(d="S",e=new a(j).compress(b),e===!1&&(d="N",e=b))):(d="S",e=new a(j).compress(b),e===!1&&(d="U",e=new c(j).compress(i(b)),(e===!1||k(e)>f)&&(d="N",e=b))),d+e},decompress:function(a){if(null==a||0===a.length)return"";a=""+a;var b=a.charAt(0);switch(b){case"S":return this._decompressByS(a.substring(1));case"W":return this._decompressByW(a.substring(1));case"U":return this._decompressByU(a.substring(1));case"N":return this._decompressByN(a.substring(1));default:return a}},_decompressByS:function(a){return(new b).decompress(a)},_decompressByW:function(a){var b={codeStart:127,codeMax:2047};return new c(b).decompress(a)},_decompressByU:function(a){return j((new c).decompress(a))},_decompressByN:function(a){return a}};var S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1],U={
compress:function(a,b){return new d(b).compress(a)},decompress:function(a,b){return new d(b).decompress(a)},compressToBase64:function(a,b){return l(i(new d(b).compress(a)))},decompressFromBase64:function(a,b){return new d(b).decompress(j(m(a)))}};return U});