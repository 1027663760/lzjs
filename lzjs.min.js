/*
 * lzjs - Compression by LZ algorithm in JavaScript.
 * @version 1.1.0
 * @copyright Copyright (c) 2014 polygon planet <polygon.planet.aqua@gmail.com>
 * @license Licensed under the MIT license.
 */
(function(p,q,m){"undefined"!==typeof exports?"undefined"!==typeof module&&module.exports?module.exports=m():exports[p]=m():"function"===typeof define&&define.amd?define(m):q[p]=m()})("lzjs",this,function(){"use strict";function p(){this.init()}function q(){}function m(){}function w(a){for(var b="",d=0,f=a.length,c,g;d<f;d++)c=a.charCodeAt(d),55296<=c&&55551>=c&&d+1<f&&(g=a.charCodeAt(d+1),56320<=g&&57343>=g&&(c=((c&1023)<<10)+(g&1023)+65536,d++)),b=128>c?b+h(c):2048>c?b+(h(192|c>>6&31)+h(128|c&63)):65536>c?b+
(h(224|c>>12&15)+h(128|c>>6&63)+h(128|c&63)):b+(h(240|c>>18&15)+h(128|c>>12&63)+h(128|c>>6&63)+h(128|c&63));return b}function x(a){for(var b="",d=0,f=a.length,c,g,e,k;d<f;)g=a.charCodeAt(d++),c=g>>4,0<=c&&7>=c?b+=h(g):12<=c&&13>=c?(c=a.charCodeAt(d++),b+=h((g&31)<<6|c&63)):14===c?(c=a.charCodeAt(d++),e=a.charCodeAt(d++),b+=h((g&15)<<12|(c&63)<<6|e&63)):d+2<f&&(c=a.charCodeAt(d++),e=a.charCodeAt(d++),k=a.charCodeAt(d++),b+=h((g&7)<<18|(c&63)<<12|(e&63)<<6|k&63));return b}function y(a){for(var b=0,
d,f,c=0,g=a.length;c<g;c++){d=a.charCodeAt(c);if(55296<=d&&55551>=d)if(c+1<g)if(f=a.charCodeAt(c+1),56320<=f&&57343>=f)d=((d&1023)<<10)+(f&1023)+65536,c++;else continue;else continue;b=128>d?b+1:2048>d?b+2:65536>d?b+3:2097152>d?b+4:67108864>d?b+5:b+6}return b}function B(a){var b,d,f,c,g;c=a.length;f=0;for(g="";f<c;){do b=s[a.charCodeAt(f++)&255];while(f<c&&-1===b);if(-1===b)break;do d=s[a.charCodeAt(f++)&255];while(f<c&&-1===d);if(-1===d)break;g+=h(b<<2|(d&48)>>4);do{b=a.charCodeAt(f++)&255;if(61===
b)return g;b=s[b]}while(f<c&&-1===b);if(-1===b)break;g+=h((d&15)<<4|(b&60)>>2);do{d=a.charCodeAt(f++)&255;if(61===d)return g;d=s[d]}while(f<c&&-1===d);if(-1===d)break;g+=h((b&3)<<6|d)}return g}var h=String.fromCharCode,t=Object.prototype.hasOwnProperty,u=function(){for(var a="",b={8:1,10:1,11:1,12:1,13:1,92:1},d=0;127>d;d++)t.call(b,d)||(a+=h(d));return a}(),n=u.length,z=Math.max(n,62)-Math.min(n,62),r=n-1,C=n+1,D=z+20,E=n+5,A=n-z-19;p.prototype={init:function(){this._length=this._index=this._offset=
this._data=null},_createWindow:function(){var a="",b,d,f,c;for(b=0;26>b;b++)for(f="abcdefghijklmnopqrstuvwxyz".charAt(b),d=25;15<d&&1024>a.length;d--)c="abcdefghijklmnopqrstuvwxyz".charAt(d),a+=" "+f+" "+c;for(;1024>a.length;)a=" "+a;return a=a.slice(0,1024)},_search:function(){this._length=0;for(var a=this._offset,b=this._data.substr(a,r),d=b.length,f=a-304,c=2,g,e;c<=d;){g=b.substr(0,c);e=this._data.substring(f,a+c-1);if(!~e.indexOf(g))break;e=e.lastIndexOf(g);for(g=f+e;c<=d&&b.charCodeAt(c)===
this._data.charCodeAt(g+c);)c++;this._index=304-e;this._length=c;c++}return 0<this._length?!0:!1},compress:function(a){if(null==a||0===a.length)return"";var b="",d=u.split(""),f=this._createWindow();this._offset=f.length;this._data=f+a;var c=-1;a=-2;for(var f=this._data.length,g,e;this._offset<f;)this._search()?(e=this._index%r,c=(this._index-e)/r,b=2===this._length?b+(d[c+54]+d[e]):b+(d[c+49]+d[e]+d[this._length]),this._offset+=this._length,a=-2):(g=this._data.charCodeAt(this._offset++),132>g?(e=
g%40,c=(g-e)/40,c+=C,a===c?b+=d[e]:(b+=d[c-D]+d[e],a=c)):(e=g%1640,c=(g-e)/1640,g=e%40,e=(e-g)/40,c+=E,a===c?b+=d[g]+d[e]:(b+=d[48]+d[c-n]+d[g]+d[e],a=c)));this._data=null;return b},decompress:function(a){if(null==a||0===a.length)return"";var b=this._createWindow(),d=!1,f=null,c,g,e,k,l={};c=0;for(g=u.length;c<g;c++)l[u.charAt(c)]=c;c=0;for(g=a.length;c<g;c++){e=l[a.charAt(c)];if(void 0===e)throw Error("Out of range in decompression");if(e<A)d?(k=l[a.charAt(++c)],e=40*k+e+1640*f):e=40*f+e,b+=h(e);
else if(47>e)f=e-A,d=!1;else if(48===e)f=l[a.charAt(++c)],f-=5,d=!0;else if(59>e){f=l[a.charAt(++c)];54>e?(e=(e-49)*r+f,f=l[a.charAt(++c)]):(e=(e-54)*r+f,f=2);if(k=b.slice(-304).slice(-e).substring(0,f)){for(e="";e.length<f;)e+=k;e=e.substring(0,f);b+=e}f=null}}return b=b.substring(1024)}};q.prototype={compress:function(a){if(null==a||0===a.length)return"";var b="",d="",f={},c=256,g=0,e=a.length,k;for(0<e&&(d=a.charAt(g++));g<e;)k=a.charAt(g++),t.call(f,d+k)?d+=k:(b=1===d.length?b+d:b+f[d],65535>=
c&&(f[d+k]=h(c++)),d=k);return b=1===d.length?b+d:b+f[d]},decompress:function(a){if(null==a||0===a.length)return"";var b="",d=[],f=256,c=0,g=a.length,e,k,l;0<g&&(e=a.charCodeAt(c++),k=h(e),b+=k,l=k);for(;c<g;)e=a.charCodeAt(c++),e=255>=e?h(e):t.call(d,e)?d[e]:l+k,b+=e,k=e.charAt(0),d[f++]=l+k,l=e;return b}};m.prototype={compress:function(a){if(null==a||0===a.length)return"";a=""+a;for(var b="",d={},b=0,f=a.length,c=0,g;c<f&&192>b;)g=a.charAt(c++),t.call(d,g)||(d[g]=null,b++);d=y(a);26>=b||192<=b?
(b=this._compressByS(a),f=b.length):(b=this._compressByW(a),f=y(b));f>d&&(b=this._compressByN(a));return b},decompress:function(a){if(null==a||0===a.length)return"";a=""+a;var b=a.charAt(0);a=a.substring(1);b="_decompressBy"+b;if("function"!==typeof this[b])throw Error("Invalid format in decompression");return this[b](a)},_compressByS:function(a){return"S"+(new p).compress(a)},_compressByW:function(a){return"W"+(new q).compress(w(a))},_compressByN:function(a){return"N"+a},_decompressByS:function(a){return(new p).decompress(a)},
_decompressByW:function(a){return x((new q).decompress(a))},_decompressByN:function(a){return a}};var s=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1],v={compress:function(a){return(new m).compress(a)},
decompress:function(a){return(new m).decompress(a)},compressBase64:function(a){a=w(v.compress(a));var b,d,f,c,g,e;f=a.length;d=0;for(b="";d<f;){c=a.charCodeAt(d++)&255;if(d===f){b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(c>>2)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt((c&3)<<4)+"==";break}g=a.charCodeAt(d++);if(d===f){b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(c>>2)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt((c&
3)<<4|(g&240)>>4)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt((g&15)<<2)+"=";break}e=a.charCodeAt(d++);b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(c>>2)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt((c&3)<<4|(g&240)>>4)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt((g&15)<<2|(e&192)>>6)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e&63)}return b},decompressBase64:function(a){return v.decompress(x(B(a)))}};
return v});
